# BusVoodoo Yaml file
# NOTE: pins-test, self-test, reset, bootloader,
#       quit, live in python script.

commands:
  version:
    input: [ 'v', 'version' ]
    expectation: [ 'BusVoodoo flavor', 'firmware date', 'device ID' ]
  modes:
    input: [ 'm', 'mode' ]
    expectation: [ 'available modes', 'hiz']
  help:
    input: [ 'h', 'help' ]
    expectation: [ 'oodoo' ]
  pinout:
    input: [ 'p', 'pinout' ]
    expectation: [ 'I/O connector pinout:' ]
  power on:
    input: [ 'P off', 'power off']
    expectation: [ '5V power rail: off', '3V3 power rail: off']
  power off:
    input: [ 'P off', 'power off']
    expectation: [ '5V', '3V3', '5.', '3.' ]
  voltage:
    input: ['L', 'LV']
    expectation: ['external voltage input']

protocols:
  uart:
    commands:
    combinations:
      inputs:
        - [1, 2]
        - [1, 2, 3, 4, 5, 6, 7, 8, 9]
        - [8, 16]
        - [1, 2]
        - [1, 2, 3, 4]
        - [1, 2, 3]
      expectations:
        - ['duplex mode', 'full-duplex', 'bidirectional']
        - ['frequency', '18000 kHz', '9000 kHz', '4500 kHz', '2250 kHz', '1125 kHz', '562 kHz', '281 kHz', '140 kHz']
        - ['data frame width in bits']
        - ['data frame bit order', 'most significant bit first', 'least significant bit first']
        - ['mode', '0', '1', '2', '3', '4']
        - ['drive mode', 'push', 'external', 'embedded']

  i2c:

  spi:
    commands:
      # "[/]	select/deselect slave" is not tested
      10100: ['write: 0x74', 'read: 0x00']
      '0x3a': ['write: 0x3a', 'read: 0x00']
      '0b1': ['write: 0x01', 'read: 0x00']
      "'a'": ['write: 0x61', 'read: 0x00']
      r: ['write: 0xff', 'read: 0x00']
      u: 'wait for 1 us'
      m: 'wait for 1 ms'
      m:42: 'wait for 42 ms'

    combinations:
      inputs:
        - [1, 2]
        - [1, 2, 3, 4, 5, 6, 7, 8, 9]
        - [8, 16]
        - [1, 2]
        - [1, 2, 3, 4]
        - [1, 2, 3]
      expectations:
        - ['duplex mode', 'full-duplex', 'bidirectional']
        - ['frequency', '18000 kHz', '9000 kHz', '4500 kHz', '2250 kHz', '1125 kHz', '562 kHz', '281 kHz', '140 kHz']
        - ['data frame width in bits']
        - ['data frame bit order', 'most significant bit first', 'least significant bit first']
        - ['mode', '0', '1', '2', '3', '4']
        - ['drive mode', 'push', 'external', 'embedded']

  1-wire:
    commands:
    options:
